<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
								  xmlns:s="library://ns.adobe.com/flex/spark" 
								  applicationDPI="160" xmlns:components="components.*"
								  initialize="init()">
	

	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	
	<fx:Script>
		<![CDATA[
			import com.demonsters.debugger.MonsterDebugger;
			
			import mx.managers.PopUpManager;
			
			import components.alerts.AlertPopUp_Login;
			
			import model.AppModel;
			
			import net.fastindemand.dispatcher.Dispatcher;
			import net.fastindemand.event.AppEvent;
			
			
			private var alertLogin:AlertPopUp_Login = new AlertPopUp_Login;
			
			
			//private static var app:LTG;
			protected function init(e:Event=null):void
			{
				
				trace("LTG - init");
				
				MonsterDebugger.initialize(this );
				Dispatcher.addEventListener( AppEvent.LOGIN_SUCCESS, onLoginSuccess );
				
				// Login stuff.
				alertLogin.open( this, true );
				alertLogin.width = this.width;
				alertLogin.height = this.height;
				
				// Center the pop-up in the parent container.
				PopUpManager.centerPopUp( alertLogin );
				
			}
			
			
			
			protected function onLoginSuccess(e:AppEvent=null):void
			{
				
				trace("LTG - onLoginSuccess");
				
				Dispatcher.removeEventListener( AppEvent.LOGIN_SUCCESS, onLoginSuccess );
				AppModel.init();
				
				
			}
			
			
			protected function onChangeView(e:AppEvent=null):void
			{
				
				trace("LTG - onChangeView");
				trace(e.type);
				
				switch( e.type )
				{
					
					case AppEvent.SHOW_PROJECTS:
						tabNav.selectedIndex = 0; 
						break;
					
					
				}
				//firstView="views.ProjectsView"
				//firstView="views.ProfileView"
				
			}
			
			
		]]>
	</fx:Script>
	
	<!--<components:ProjectCreator id="projectCreator"/>-->
	<s:SpriteVisualElement id="area" width="100%" height="100%" />
	<s:TabbedViewNavigator id="tabNav" width="100%" height="100%">
		<!--<<s:ViewNavigator label="Projects" id="projectsView" width="100%" height="100%" firstView="views.ProjectsView"/>
		<s:ViewNavigator label="Profile" id="profilePanel" width="100%" height="100%" firstView="views.ProfileView"/>
		s:ViewNavigator label="Debug" id="debugPanel" width="100%" height="100%" firstView="views.DebugView"/>-->
	</s:TabbedViewNavigator>
		
</s:Application>
